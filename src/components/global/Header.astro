---
// [Components]
import HeaderLogo from './HeaderLogo.astro'; // Company Logo
import MobileNavigation from './MobileNavigation.astro'; // Mobile Navigation Menu
import DesktopNavigation from './DesktopNavigation.astro'; // Desktop Navigation Menu

// [Styles] - Header: <header>
const { headerSpacing, headerLayout, headerColors } = {
	headerSpacing: 'w-full h-24',
	headerLayout: 'flex justify-center items-center sticky top-0 mx-auto',
	headerColors: 'bg-white shadow-md',
};

// [Styles] - Navigation: <nav>
const { navSpacing, navLayout, navColors } = {
	navSpacing: 'size-full px-3 py-2',
	navLayout:
		'flex justify-between items-center mx-auto mx-w-content-sm md:max-w-content-md lg:max-w-content-lg xl:max-w-content-xl',
	navColors: '',
};

// [Styles] - Props - Custom Styles
const { customHeaderStyles = '', customNavStyles = '' } = Astro.props;
---

<header
	class=`${headerSpacing} ${headerLayout} ${headerColors} ${customHeaderStyles}`
>
	<nav class=`${navSpacing} ${navLayout} ${navColors} ${customNavStyles}`>
		<HeaderLogo />
		<MobileNavigation />
		<DesktopNavigation />
	</nav>
</header>

<script>
	// Animate Header on Scroll
	import { scroll, animate } from 'motion';
	// Fix: Set the initial state of the header to 100% width before any animations occur.
	// This prevents the header from animating from 0% to 100% on page load.
	// The animation should only trigger when scrolling, not on initial render.
	const headerElement = document.querySelector('header');
	if (headerElement) {
		headerElement.style.transform = 'translateY(0px)';
		headerElement.style.width = '100%';
	}

	// Animation Styles Configuration
	scroll((progress: any) => {
		if (progress >= 0.95) {
			animate(
				'header',
				{ width: '90%', transform: 'translateY(2rem)', borderRadius: '1rem' },
				{ duration: 0.5, ease: 'easeOut' }
			);
		} else {
			animate(
				'header',
				{ width: '100%', transform: 'translateY(0px)', borderRadius: '0px' },
				{ duration: 0.5, ease: 'easeOut' }
			);
		}
	});
</script>
