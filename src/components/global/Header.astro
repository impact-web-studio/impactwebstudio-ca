---
// [Import] Navigation Link List Item
import NavLinkItem from './navLinkItem.astro';
import MobileMenuButton from './MobileMenuButton.astro';
// [Import] Theme Toggle Component
import ThemeToggle from './ThemeToggle.astro';

// [Data] - Navigation Links
const navLinks = [
	{ text: 'Home', url: '/', active: true },
	{ text: 'About', url: '/about', active: false },
	{ text: 'Services', url: '/services', active: false },
	{ text: 'Portfolio', url: '/portfolio', active: false },
	{ text: 'Pricing', url: '/pricing', active: false },
];

// [Data] - CTA Link (Separate)
const ctaLink = { text: 'Contact', url: '/contact' };

// [Styles] - Header
const { headerSpacing, headerLayout, headerColors } = {
	headerSpacing: 'w-full h-24',
	headerLayout: 'flex justify-center items-center sticky top-0 mx-auto',
	headerColors: 'bg-green-600',
};

// [Styles] - Navigation
const { navSpacing, navLayout, navColors } = {
	navSpacing: 'size-full px-3 py-2',
	navLayout:
		'flex justify-between items-center mx-auto mx-w-content-sm md:max-w-content-md lg:max-w-content-lg xl:max-w-content-xl',
	navColors: 'bg-green-600',
};

// [Styles] Navigation Link Group
const { linkGroupSpacing, linkGroupLayout } = {
	linkGroupSpacing: 'gap-x-8',
	linkGroupLayout: 'hidden lg:flex lg:justify-between lg:items-center',
};

// [Styles] - Logo
const { logoContainer, logo } = {
	logoContainer: 'w-[100px] h-[50px]',
	logo: 'size-full',
};

// [Styles] - CTA
const { ctaPadding, ctaColors } = {
	ctaPadding: 'px-3 py-2',
	ctaColors: 'text-black bg-green-600',
};

// [Styles] - Props - Custom Styles
const {
	customHeaderStyles = '',
	customNavStyles = '',
	customCTAStyles = '',
} = Astro.props;
---

<header
	class=`${headerSpacing} ${headerLayout} ${headerColors} ${customHeaderStyles}`
>
	<nav class={`${navSpacing} ${navLayout} ${navColors} ${customNavStyles}`}>
		<div class=`${logoContainer}`>
			<img
				class=`${logo}`
				src='/src/assets/brand/iws-logo.svg'
				alt='Impact Web Studio Logo'
			/>
		</div>
		<!-- [Desktop] - Navigation Links -->
		<ul
			class=`${linkGroupSpacing} ${linkGroupLayout}`
			}
		>
			{
				navLinks.map((link) => (
					<NavLinkItem
						text={link.text}
						url={link.url}
						active={link.active}
						variant='desktop'
					/>
				))
			}
		</ul>
		<!-- [Mobile] Hamburger Menu -->
		<div class='lg:hidden header-btn'>
			<!-- <ThemeToggle/> -->
			<MobileMenuButton />
		</div>

		<!-- CTA & Theme Toggle - Hidden on Mobile -->
		<div class='hidden lg:block header-btn'>
			<!-- <ThemeToggle /> -->
			<a
				href={ctaLink.url}
				class=`${ctaPadding} ${ctaColors} ${customCTAStyles}`
				>{ctaLink.text}</a
			>
		</div>
	</nav>
	<script>
		// [NavBar] - Scroll Animation
		import { scroll, animate } from 'motion';
		// Fix: Set the initial state of the header to 100% width before any animations occur.
		// This prevents the header from animating from 0% to 100% on page load.
		// The animation should only trigger when scrolling, not on initial render.
		const headerElement = document.querySelector('header');
		if (headerElement) {
			headerElement.style.transform = 'translateY(0px)';
			headerElement.style.width = '100%';
		}

		// Scroll Animation Configuration
		scroll((progress: any) => {
			if (progress >= 0.95) {
				animate(
					'header',
					{ width: '90%', transform: 'translateY(2rem)', borderRadius: '1rem' },
					{ duration: 0.5, ease: 'easeOut' }
				);
			} else {
				animate(
					'header',
					{ width: '100%', transform: 'translateY(0px)', borderRadius: '0px' },
					{ duration: 0.5, ease: 'easeOut' }
				);
			}
		});
	</script>
</header>
