---
const {
	class: className,
	icon,
	title,
	description,
	ctaText,
	ctaLink,
} = Astro.props;

let IconComponent;
try {
	IconComponent = await import(`../../assets/icons/${icon}.astro`).then(
		(module) => module.default
	);
} catch (e) {
	console.error(`Failed to load icon: ${icon}`);
}
---

<div
	class=`card bg-light-permanent shadow-lg px-5 py-6 basis-full min-w-[300px] md:basis-[32%] grow shrink-0 rounded-[0.875rem] flex flex-col gap-6 group hover:bg-branded-blue justify-between ${className}`
>
	<div class='top flex flex-col gap-4'>
		<span
			class='icon-wrapper w-12 group-hover:text-light-permanent [transition:none!important]'
		>
			{
				IconComponent && (
					<IconComponent
						width='100%'
						height='100%'
						className='[transition:none!important]'
					/>
				)
			}
		</span>
		<div class='text flex flex-col gap-2'>
			<div
				class='font-secondary text-[1.25rem] uppercase font-bold text-contrast-permanent group-hover:text-light-permanent'
			>
				{title}
			</div>
			<div class='text-body leading-5 group-hover:text-light-permanent'>
				{description}
			</div>
		</div>
	</div>
	<a
		href={ctaLink}
		class='font-semibold capitalize font-secondary text-sm text-primary-blue py-2 rounded-lg group-hover:text-primary-orange hover:px-3 hover:bg-primary-orange hover:text-light-permanent transition-colors duration-300 w-fit'
	>
		{ctaText}
	</a>
</div>
